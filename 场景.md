# _图像加载太慢_

    1.  可以使用懒加载,即当图像进入可视区域时,再加载图像(html5 中 img 标签 有 loading lazy 直接实现) 前端级别
    2.  预加载,即提前加载图像 前端级别
    3.  预览图,即先加载一张缩略图,然后再加载完整图像 后端级别
    4.  调整图像分辨率,即根据显示图像的大小,加载合适的图像
    5.  图像压缩,即减少图像的大小
    6.  图像 CDN 加速,即使用 CDN 加速图像加载 后端级别
    7.  图像缓存,即使用浏览器缓存图像,通过设置响应头的 Cache-Control 和 Expires 字段来实现(该方法能缓存比 localStorage 更多的数据并且加载更快)

# _如何优化页面的加载速度_

总结：1.网络原理 2.资源引入 3.代码
1、网络原理 服务器响应时间:有独立的服务器,提高 Web 服务器的质量,移除不必要的插件
2、网络原理 浏览器缓存 :减少 HTTP 请求,从而提高网站加载速度
3、资源引入 gzip 压缩:它的工作原理是在发送 HTML 和 CSS 文件到浏览器之前压缩文件大小
4、异步脚本:网页负载就不必依赖于这些异步脚本
5、网络原理 内容分发网络（CDN）:CDN 是位于不同地理位置的服务器组成的网络。每个服务器都拥有所有网站的文件副本。有网站访问者请求文件和网页时就可以直接从就近网站服务器发送过来（也可以是从负载最小的服务器）
6、优化 JavaScript、HTML 和 CSS:删除所有不必要的空 格和注释从而减小文件大小
7、资源引入 置于顶部的样式表和底部的脚本
8、资源引入 避免阻塞型的 JavaScript 和 CSS
9、资源引入 JavaScript 的延迟解析
10、启用 Keep Alive:用户请求网页时浏览器首先需访问 HTML 文件,然后它才读取这些文件,并请求与其他资料相关联。如果“Keep Alive”选项被禁止,下载网站的进程就会增加从而拖累网站速度。启用 KeepAlive 的另一个好处是,可以减少 CPU 使用
11、图像和文件格式:建议使用 JPEG 格式,而不是 GIF 和 PNG 图像,除非图像包含 Alpha 因子或者是透明的
12、优化代码：不使用内联 CSS
13、资源引入 文件分离:可以增加并行下载的数量
14、网络原理 尽量减少 HTTP 请求:减少网站上的对象数量；最小化网站上的重定向数量；使用 CSS Sprites 技术；结合 JavaScripts 和 CSS
15、资源引入 去掉不必要的插件
16、网络原理 减少 DNS 查询(DNS lookups)

# _一个页面从输入 url 到加载完成的过程都发生了什么,请详细说明_

1. 首先,在浏览器地址栏中输入 url,浏览器解析出域名
2. 浏览器先查看浏览器缓存-系统缓存-路由器缓存,如果缓存中没有对应 ip,会按域名服务器顺序向域名服务器发送查询请求,直到查到结果,如果找不到 ip,浏览器会报错。
3. 浏览器根据 ip 地址向服务器发起 tcp 连接,与浏览器建立 tcp 三次握手
4. 握手成功后,浏览器向服务器发送 http 请求,请求数据包，若为 https 协议，会进行 ssl 握手
5. 服务器处理收到的请求,处理完成后将数据返回至浏览器
6. 浏览器收到 HTTP 响应,开始解析 html 源码,发现 head 里有个 base 标签,里面有个 url,于是又发起了一个请求.
7. 浏览器解析完成后渲染页面:生成 Dom 树、解析 css 样式、js 交互

场景题 tips

1. 场景 富文本 是一种可以设置字体，颜色，大小，样式，甚至可以插入图片，链接等的文本
2. 场景 前端攻击方法：XSS，CSRF，点击劫持，SQL 注入，DDOS，DNS 劫持，中间人攻击。
3. 场景 canvas 大量渲染优化

   1. 只渲染可视区域，通过监听滚动事件，判断滚动条的位置，只渲染可视区域的内容
   2. 图像压缩，通过 canvas 的 drawImage 方法的第三个参数，可以对图像进行压缩，第三个参数为一个对象，包含 width 和 height 属性，可以设置图像的宽高，若不设置，则默认为图像的原始宽高
   3. GPU 加速
   4. WebGL 绘制图形代替 canvas(类似开启 GPU 加速)
   5. three.js 代替 canvas

4. 场景 单页面应用和多页面应用的区别：单页面应用只有一个 html 页面，所有的页面都是在这个页面上切换，多页面应用有多个 html 页面，每个页面都是一个独立的页面，有自己的根模块。切换页面时，会重新加载页面，单页面应用的优点是页面切换快，用户体验好，缺点是首屏加载慢，多页面应用的优点是首屏加载快，缺点是页面切换慢，用户体验差。
5. 场景 页面监控 数据埋点
   1. FPS(frame per second) 每秒帧数,一般 60 帧为流畅,低于 30 帧为卡顿,通过 requestAnimationFrame 来获取每一帧的时间,计算是否掉帧
   2. Performance API,通过 performance.timing 来获取页面加载时间,通过 performance.getEntries()来获取页面资源加载时间,通过 performance.memory 来获取页面内存使用情况
   3. PerformanceObserver API,通过 performanceObserver 来监听页面性能,通过 performanceObserver.observe()来监听页面性能,通过 performanceObserver.disconnect()来停止监听页面性能
   4. navigation.connection,通过 navigator.connection 来获取网络连接信息,通过 navigator.onLine 来判断当前是否联网
